

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>classify &mdash; pplacer 1.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="pplacer 1.1 documentation" href="../index.html" />
    <link rel="up" title="guppy" href="guppy.html" />
    <link rel="next" title="classify_rdp" href="guppy_classify_rdp.html" />
    <link rel="prev" title="check" href="guppy_check.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="guppy_classify_rdp.html" title="classify_rdp"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="guppy_check.html" title="check"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">pplacer 1.1 documentation</a> &raquo;</li>
          <li><a href="guppy.html" accesskey="U">guppy</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">classify</a><ul>
<li><a class="reference internal" href="#options">Options</a></li>
<li><a class="reference internal" href="#details">Details</a></li>
<li><a class="reference internal" href="#sqlite">Sqlite</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="guppy_check.html"
                        title="previous chapter">check</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="guppy_classify_rdp.html"
                        title="next chapter">classify_rdp</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/generated_rst/guppy_classify.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="classify">
<span id="guppy-classify"></span><h1>classify<a class="headerlink" href="#classify" title="Permalink to this headline">¶</a></h1>
<p><cite>classify</cite> outputs classification information in a tabular or SQLite format.</p>
<div class="highlight-python"><pre>usage: classify [options] placefile[s]</pre>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-c</span></kbd></td>
<td>Reference package path. Required.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--sqlite</span></kbd></td>
<td>Specify the database file to use.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-o</span></kbd></td>
<td>Specify the filename to write to.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--out-dir</span></kbd></td>
<td>Specify the directory to write files to.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--prefix</span></kbd></td>
<td>Specify a string to be prepended to filenames.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--csv</span></kbd></td>
<td>Output the results as csv instead of a padded matrix.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--pp</span></kbd></td>
<td>Use posterior probability for our criteria.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--mrca-stats</span></kbd></td>
<td>Print the number of placements just proximal to MRCAs.</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--tax-median-identity-from</span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>Calculate the median identity for each sequence per-tax_id from the specified alignment.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--mrca-class</span></kbd></td>
<td>Classify against a placefile that was generated with MRCA classification</td></tr>
</tbody>
</table>
</div>
<div class="section" id="details">
<h2>Details<a class="headerlink" href="#details" title="Permalink to this headline">¶</a></h2>
<p>This subcommand outputs the classifications made by pplacer in a database or in a tabular format appropriate for use with R.</p>
<p><em>The classifications made by the current implementation of pplacer are done with a simple, root-dependent algorithm.
We are currently working on improved algorithms.</em>
For best results, first taxonomically root the tree in your reference package (so that the root of the tree corresponds to the &#8220;deepest&#8221; evolutionary event according to the taxonomy).
This can be done automatically the <cite>taxit reroot</cite> command in taxtastic.
(Note that as of 27 May 2011, this requires the dev version of biopython available on github.)</p>
<p>The classifications are simply done by containment.
Say clade <em>A</em> of the reference tree is the smallest such that contains a given placement.
The most specific classification for that read will be the lowest common ancestor of the taxonomic classifications for the leaves of <em>A</em>.
If the desired classification is more specific than that, then we get a disconnect between the desired and the actual classification.
For example, if we try to classify at the species level and the clade LCA is a genus, then we will get a genus name.
If there is uncertainty in read placement, then there is uncertainty in classification.</p>
<p>For example, here is a classification list made for one read using the tabular output.
The columns are as follows: read name, attempted rank for classification, actual rank for classification, taxonomic identifier, and confidence.
You can see that in this example, there is some uncertainty at and below species, but only one classification at the genus level.</p>
<div class="highlight-python"><pre>GLKT0ZE01CQ2BU                      root          root       1          1
GLKT0ZE01CQ2BU                below_root    below_root  131567          1
GLKT0ZE01CQ2BU              superkingdom  superkingdom       2          1
GLKT0ZE01CQ2BU        below_superkingdom  superkingdom       2          1
GLKT0ZE01CQ2BU  below_below_superkingdom  superkingdom       2          1
GLKT0ZE01CQ2BU               superphylum  superkingdom       2          1
GLKT0ZE01CQ2BU                    phylum        phylum    1239          1
GLKT0ZE01CQ2BU                 subphylum        phylum    1239          1
GLKT0ZE01CQ2BU                     class         class  186801          1
GLKT0ZE01CQ2BU                  subclass         class  186801          1
GLKT0ZE01CQ2BU                     order         order  186802          1
GLKT0ZE01CQ2BU               below_order         order  186802          1
GLKT0ZE01CQ2BU         below_below_order         order  186802          1
GLKT0ZE01CQ2BU                  suborder         order  186802          1
GLKT0ZE01CQ2BU                    family        family  186804          1
GLKT0ZE01CQ2BU              below_family        family  186804          1
GLKT0ZE01CQ2BU                     genus         genus    1257          1
GLKT0ZE01CQ2BU             species_group         genus    1257          1
GLKT0ZE01CQ2BU          species_subgroup         genus    1257          1
GLKT0ZE01CQ2BU                   species         genus    1257  0.0732247
GLKT0ZE01CQ2BU                   species       species    1261   0.853561
GLKT0ZE01CQ2BU                   species       species  341694   0.073214
GLKT0ZE01CQ2BU             below_species         genus    1257  0.0732247
GLKT0ZE01CQ2BU             below_species       species    1261   0.853561
GLKT0ZE01CQ2BU             below_species       species  341694   0.073214</pre>
</div>
</div>
<div class="section" id="sqlite">
<h2>Sqlite<a class="headerlink" href="#sqlite" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">guppy</span> <span class="pre">classify</span></tt> can also write its output into a sqlite3 database. The
argument to the <tt class="docutils literal"><span class="pre">--sqlite</span></tt> flag is the sqlite3 database into which the
results should be put. This database must have first been intialized using
<tt class="docutils literal"><span class="pre">rppr</span> <span class="pre">taxtable</span></tt>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="guppy_classify_rdp.html" title="classify_rdp"
             >next</a> |</li>
        <li class="right" >
          <a href="guppy_check.html" title="check"
             >previous</a> |</li>
        <li><a href="../index.html">pplacer 1.1 documentation</a> &raquo;</li>
          <li><a href="guppy.html" >guppy</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Erick Matsen and Aaron Gallagher.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.
    </div>
  </body>
</html>